<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/stream-chat-swift/blog/rss.xml" title="StreamChat Swift SDK Docs Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/stream-chat-swift/blog/atom.xml" title="StreamChat Swift SDK Docs Blog Atom Feed"><title data-react-helmet="true">Working with Channel List | StreamChat Swift SDK Docs</title><meta data-react-helmet="true" property="og:url" content="https://getstream.github.io/stream-chat-swift//stream-chat-swift/guides/working-with-channel-list"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Working with Channel List | StreamChat Swift SDK Docs"><meta data-react-helmet="true" name="description" content="Understanding ChannelListQuery"><meta data-react-helmet="true" property="og:description" content="Understanding ChannelListQuery"><link data-react-helmet="true" rel="shortcut icon" href="https://getstream.imgix.net/images/favicons/favicon-96x96.png"><link data-react-helmet="true" rel="canonical" href="https://getstream.github.io/stream-chat-swift//stream-chat-swift/guides/working-with-channel-list"><link data-react-helmet="true" rel="alternate" href="https://getstream.github.io/stream-chat-swift//stream-chat-swift/guides/working-with-channel-list" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://getstream.github.io/stream-chat-swift//stream-chat-swift/guides/working-with-channel-list" hreflang="x-default"><link rel="stylesheet" href="/stream-chat-swift/assets/css/styles.284bd3b0.css">
<link rel="preload" href="/stream-chat-swift/assets/js/styles.725bd164.js" as="script">
<link rel="preload" href="/stream-chat-swift/assets/js/runtime~main.0ada098c.js" as="script">
<link rel="preload" href="/stream-chat-swift/assets/js/main.b0a9bf59.js" as="script">
<link rel="preload" href="/stream-chat-swift/assets/js/1.fdcd1e01.js" as="script">
<link rel="preload" href="/stream-chat-swift/assets/js/2.c4a5c1e3.js" as="script">
<link rel="preload" href="/stream-chat-swift/assets/js/3.cf062860.js" as="script">
<link rel="preload" href="/stream-chat-swift/assets/js/1be78505.5242f7cc.js" as="script">
<link rel="preload" href="/stream-chat-swift/assets/js/56.f7fc442b.js" as="script">
<link rel="preload" href="/stream-chat-swift/assets/js/935f2afb.ddf29bbf.js" as="script">
<link rel="preload" href="/stream-chat-swift/assets/js/17896441.d1c47389.js" as="script">
<link rel="preload" href="/stream-chat-swift/assets/js/a5e1adf8.f05128c1.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/stream-chat-swift/"><img src="/stream-chat-swift/img/logo.svg" alt="StreamChat Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/stream-chat-swift/img/logo.svg" alt="StreamChat Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">StreamChat Swift SDK Docs</strong></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/GetStream/stream-chat-swift" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/stream-chat-swift/"><img src="/stream-chat-swift/img/logo.svg" alt="StreamChat Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/stream-chat-swift/img/logo.svg" alt="StreamChat Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">StreamChat Swift SDK Docs</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/GetStream/stream-chat-swift" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/stream-chat-swift/">Home</a></li><li class="menu__list-item"><a class="menu__link" href="/stream-chat-swift/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/stream-chat-swift/guides/integration">Integration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/stream-chat-swift/guides/getting-started">Getting Started</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/stream-chat-swift/guides/working-with-channel-list">Working with Channel List</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/stream-chat-swift/guides/working-with-a-channel">Working with a Channel</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/stream-chat-swift/guides/working-with-messages">Working with Messages</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/stream-chat-swift/guides/working-with-user">Working with User</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/stream-chat-swift/guides/pinned-messages">Pinned Messages</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/stream-chat-swift/guides/working-with-attachments">Working with Attachments/Files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/stream-chat-swift/guides/working-with-reactions">Working with Reactions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/stream-chat-swift/guides/working-with-members">Working with Members</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/stream-chat-swift/guides/working-with-watchers">Working with Watchers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/stream-chat-swift/guides/events">Events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/stream-chat-swift/guides/push-notifications">Push Notifications</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/stream-chat-swift/guides/connection-status">Connection Status</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/stream-chat-swift/guides/ui-customization">UI Customization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/stream-chat-swift/guides/moderation">Moderation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/stream-chat-swift/guides/filter-query-guide">Filter &amp; Query Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/stream-chat-swift/guides/multi-tenancy">Multi-Tenancy &amp; Teams</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/stream-chat-swift/guides/debugging">Debugging</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">StreamChat Controllers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stream-chat-swift/controllers/controllers-overview">Controllers Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">UI Components</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stream-chat-swift/ui-components/ui-components-overview">UI Components Overview</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/stream-chat-swift/migrating-from-1.x-and-2.x">Migrating from 1.x and 2.x</a></li><li class="menu__list-item"><a class="menu__link" href="/stream-chat-swift/faq">Frequenty Asked Questions</a></li><li class="menu__list-item"><a class="menu__link" href="/stream-chat-swift/glossary">Glossary</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Working with Channel List</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="understanding-channellistquery"></a>Understanding <code>ChannelListQuery</code><a class="hash-link" href="#understanding-channellistquery" title="Direct link to heading">#</a></h2><p>The <code>ChannelListQuery</code> is the structure used for specifiying the query parameters for fetching the list of channels from Stream backend.
It has 4 parameters in it&#x27;s <code>init</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly swift"><div tabindex="0" class="prism-code language-swift codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">public init(</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        filter: Filter&lt;_ChannelListFilterScope&lt;ExtraData&gt;&gt;,</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        sort: [Sorting&lt;ChannelListSortingKey&gt;] = [],</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        pageSize: Int = .channelsPageSize,</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        messagesLimit: Int = .messagesPageSize</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Let&#x27;s dive deep into each one.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="filter"></a>Filter<a class="hash-link" href="#filter" title="Direct link to heading">#</a></h3><p>Filter is the main parameter for a query. You can define different filters to fetch different sets of channels for a user.
Examples of some most commonly used filters:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly swift"><div tabindex="0" class="prism-code language-swift codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">// Assume we&#x27;ve already created and configured our ChatClient</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// Filter for channels where our user is a member</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">let filter = Filter&lt;ChannelListFilterScope&gt;.containMembers(userIds: [client.currentUserId!])</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// Filter for channels where the name starts with &quot;Group&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">let filter = Filter&lt;ChannelListFilterScope&gt;.autocomplete(.name, text: &quot;Group&quot;)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// Compound Filter for channels where team is read and our user is a member</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">let filter = Filter&lt;ChannelListFilterScope&gt;.and([.equal(.team, to: &quot;read&quot;),</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                                 .containMembers(userIds: [client.currentUserId!])])</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>For more information about <code>team</code>, please refer to our <a href="/stream-chat-swift/guides/multi-tenancy">Multi-Tenancy Guide</a>.</p><p>For more information about filters, please refer to our <a href="/stream-chat-swift/guides/filter-query-guide">Filter &amp; Query Guide</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="sorting"></a>Sorting<a class="hash-link" href="#sorting" title="Direct link to heading">#</a></h3><p>Sorting parameter is used to sort the list of channels returned. By default, Channel List will be sorted by their last message date (or channel creation date, if the channel is empty).
Most commonly, you don&#x27;t need to specify any sorting, StreamChat SDK handles this. If you&#x27;d like, you can create custom sortings, such as:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly swift"><div tabindex="0" class="prism-code language-swift codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">// Sorting for always showing most crowded channels first</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">let sorting: [Sorting&lt;ChannelListSortingKey&gt;] = [.init(key: .memberCount, isAscending: true),</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                                 .init(key: .lastMessageAt, isAscending: true)]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="pagesize"></a>PageSize<a class="hash-link" href="#pagesize" title="Direct link to heading">#</a></h3><p>Page size is used to specify how many channels the initial page will show. You can specify an integer value for advanced usecases. Most commonly, you don&#x27;t need to touch this.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="message-limit"></a>Message Limit<a class="hash-link" href="#message-limit" title="Direct link to heading">#</a></h3><p><code>messagesLimit</code> is used to specify how many messages the initial fetch will return.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="displaying-the-list-of-channels"></a>Displaying the list of Channels<a class="hash-link" href="#displaying-the-list-of-channels" title="Direct link to heading">#</a></h2><p>Displaying the list of channels consists of creating the controller for the list you want to display, passing this controller to a <code>ChatChannelListVC</code> instance, and displaying the view controller. To demonstrate:</p><img align="right" src="../img/channel-list.png" width="20%"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly swift"><div tabindex="0" class="prism-code language-swift codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">// Create the query for the channel list we desire</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">let query = ChannelListQuery(filter: .containMembers(userIds: [client.currentUserId!]))</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// Create the ChannelListController for the query</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">let controller = chatClient.channelListController(query: query)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// Create the ChatChannelListVC instance</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">let channelListVC = ChatChannelListVC()</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// Pass the controller to the VC</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">channelListVC.controller = controller</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// Display the VC</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">present(channelListVC, animated: true)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>It&#x27;s that easy. <code>ChatChannelListVC</code> internally handles all parameters, sorting, pagination and updating the list in itself. The rest of this guide will explain how to work with controller, for a guide on <code>ChatChannelListVC</code>, please refer to <a href="/stream-chat-swift/guides/404">ChatChannelListVC Component Overview</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getting-the-list-of-channels-for-a-user"></a>Getting the list of Channels for a User<a class="hash-link" href="#getting-the-list-of-channels-for-a-user" title="Direct link to heading">#</a></h2><p>If you&#x27;d like to have your own UI component, for access the list of channels for any other purpose, you can do so as shown here:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly swift"><div tabindex="0" class="prism-code language-swift codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">// Create the query for the channel list we desire</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">let query = ChannelListQuery(filter: .containMembers(userIds: [client.currentUserId!]))</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// Create the ChannelListController for the query</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">let controller = chatClient.channelListController(query: query)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// Access `channels` property directly</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">let firstChannel = controller.channels[0]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">print(firstChannel.name)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Accessing the <code>channels</code> property of a controller starts the initial database fetch automatically, and will return whatever data you have locally cached.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="importance-of-synchronize"></a>Importance of <code>synchronize</code><a class="hash-link" href="#importance-of-synchronize" title="Direct link to heading">#</a></h3><p>As stated above, plainly accessing <code>channels</code> property will only make locally available data visible. If your client is not up-to-date with backend, or it never cached any data, you need to call <code>synchronize</code> to make local client sync with backend.
After you call <code>synchronize</code>, your <code>channels</code> property will be updated and you&#x27;ll have the latest channels.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly swift"><div tabindex="0" class="prism-code language-swift codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">// Create the query for the channel list we desire</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">let query = ChannelListQuery(filter: .containMembers(userIds: [client.currentUserId!]))</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// Create the ChannelListController for the query</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">let controller = chatClient.channelListController(query: query)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// Call synchronize on controller</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">controller.synchronize { error in</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    // Controller reports error if any happened</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    if let error = error {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        // Handle error here</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        print(&quot;Error happened during synchronize: \(error)&quot;)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        return</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    // At this point, you&#x27;re safe to access newly fetched channels</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    // Access `channels` property directly</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    let firstChannel = controller.channels[0]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    print(firstChannel.name)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="observing-changes-to-channel-list"></a>Observing changes to Channel List<a class="hash-link" href="#observing-changes-to-channel-list" title="Direct link to heading">#</a></h3><p>Accessing <code>channels</code> property of the controller is not ideal, so in many cases you&#x27;d require a way to observe changes to this property. There are 3 most common ways of doing so: UIKit Delegates, Combine publishers and SwiftUI wrappers.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="uikit-delegates"></a>UIKit Delegates<a class="hash-link" href="#uikit-delegates" title="Direct link to heading">#</a></h4><p><code>ChatChannelListController</code> has <code>ChatChannelListControllerDelegate</code> with <code>didChangeChannels</code> function:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly swift"><div tabindex="0" class="prism-code language-swift codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">func controller(</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        _ controller: ChatChannelListController,</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        didChangeChannels changes: [ListChange&lt;ChatChannel&gt;]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    )</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Whenever the <code>channels</code> property of the controller changes, this delegate function will be called. So, our example above becomes:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly swift"><div tabindex="0" class="prism-code language-swift codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">class ChannelListViewController: UIViewController {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    let channelListController = chatClient.channelListController(</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">       query: ChannelListQuery(filter: .containMembers(userIds: [chatClient.currentUserId]))</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    )</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    override func viewDidLoad() {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">       super.viewDidLoad()</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">       channelListController.delegate = self</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">       // update your UI with the cached channels first, for example by calling reloadData() on UITableView</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">       let locallyAvailableChannels = channelListController.channels</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">       // call `synchronize()` to update the locally cached data. the updates will be delivered using delegate methods</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">       channelListController.synchronize()</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">extension ChannelListViewController: ChatChannelListControllerDelegate { </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    func controller(_ controller: ChatChannelListController, didChangeChannels changes: [ListChange&lt;Channel&gt;]) {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        // The list of channels has changed. You can for example animate the changes:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        tableView.beginUpdates()        </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        for change in changes {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            switch change {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            case let .insert(_, index: index):</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                tableView.insertRows(at: [index], with: .automatic)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            // etc ...</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        }        </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        tableView.endUpdates()</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Additionally, as with all StreamChat Controllers, <code>ChannelListController</code> has <code>state</code> and a delegate function to observe it&#x27;s <code>state</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly swift"><div tabindex="0" class="prism-code language-swift codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">func controller(_ controller: DataController, didChangeState state: DataController.State) </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>You can use this delegate function to show any error states you might see. For more information, see <a href="/stream-chat-swift/guides/404">DataController Overview</a>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="combine-publishers"></a>Combine publishers<a class="hash-link" href="#combine-publishers" title="Direct link to heading">#</a></h4><p><code>ChannelListController</code> has publishers for its <code>channels</code> property so it&#x27;s observable, like so:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly swift"><div tabindex="0" class="prism-code language-swift codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">class ChannelsViewController: UIViewController {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    let channelListController = chatClient.channelListController(</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">       query: ChannelListQuery(filter: .containMembers(userIds: [chatClient.currentUserId]))</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    )</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    private var cancellables: Set&lt;AnyCancellable&gt; = []</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    override func viewDidLoad() {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">       super.viewDidLoad()</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">       // update your UI with the cached channels first, for example by calling reloadData() on UITableView</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">       let locallyAvailableChannels = channelListController.channels</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">       // Observe changes to the list from the publishers</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        channelListController</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">             .channelsChangesPublisher</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">             .receive(on: RunLoop.main)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">             .sink { [weak self] changes in</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                // animate the changes to the channel list</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">             }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">             .store(in: &amp;cancellables)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">       // call `synchronize()` to update the locally cached data. the updates will be delivered using channelsChangesPublisher</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">       channelListController.synchronize()</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="swiftui-wrappers"></a>SwiftUI Wrappers<a class="hash-link" href="#swiftui-wrappers" title="Direct link to heading">#</a></h4><p><code>ChannelListController</code> is fully compatible with SwiftUI.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly swift"><div tabindex="0" class="prism-code language-swift codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">// View definition</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">struct ChannelListView: View {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    @ObservedObject var channelList: ChatChannelListController.ObservableObject</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    init(channelListController: ChatChannelListController) {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        self.channelList = channelListController.observableObject</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    var body: some View {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        VStack {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            List(channelList.channels, id: \.self) { channel in</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                Text(channel.name)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        .navigationBarTitle(&quot;Channels&quot;)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        .onAppear { </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            // call `synchronize()` to update the locally cached data.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            channelList.controller.synchronize() </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// Usage</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">let channelListController = chatClient.channelListController(</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    query: ChannelListQuery(filter: .containMembers(userIds: [chatClient.currentUserId]))</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">let view = ChannelListView(channelListController: channelListController)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="paginating-channel-list"></a>Paginating Channel List<a class="hash-link" href="#paginating-channel-list" title="Direct link to heading">#</a></h2><p>When you scroll to the end of locally available data, you&#x27;ll need to fetch the next page of channels from backend. Controller has the function <code>loadNextChannels</code>. Typically you do this when you reach the end of the list, like so:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly swift"><div tabindex="0" class="prism-code language-swift codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">override func tableView(_ tableView: UITableView, willDisplay cell: UITableViewCell, forRowAt indexPath: IndexPath) {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    if indexPath.section == tableView.numberOfSections - 1,</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">       indexPath.row == tableView.numberOfRows(inSection: indexPath.section) - 1 {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        // We&#x27;ll display the last channel soon, we need to load next page of channels</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        channelListController.loadNextChannels()</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="marking-all-channels-as-read"></a>Marking all Channels as Read<a class="hash-link" href="#marking-all-channels-as-read" title="Direct link to heading">#</a></h2><p>When you&#x27;re displaying, or loading a set of channels, you may want to mark all the channels as read. For this, <code>ChannelListController</code> has <code>markAllRead</code> function:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly swift"><div tabindex="0" class="prism-code language-swift codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">controller.markAllRead()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This function will reset the unread count for all the channels the controller paginates.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/GetStream/stream-chat-swift/edit/main/stream-chat-swift-docs/docs/guides/working-with-channel-list.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/stream-chat-swift/guides/getting-started"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Getting Started</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/stream-chat-swift/guides/working-with-a-channel"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Working with a Channel Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#understanding-channellistquery" class="table-of-contents__link">Understanding <code>ChannelListQuery</code></a><ul><li><a href="#filter" class="table-of-contents__link">Filter</a></li><li><a href="#sorting" class="table-of-contents__link">Sorting</a></li><li><a href="#pagesize" class="table-of-contents__link">PageSize</a></li><li><a href="#message-limit" class="table-of-contents__link">Message Limit</a></li></ul></li><li><a href="#displaying-the-list-of-channels" class="table-of-contents__link">Displaying the list of Channels</a></li><li><a href="#getting-the-list-of-channels-for-a-user" class="table-of-contents__link">Getting the list of Channels for a User</a><ul><li><a href="#importance-of-synchronize" class="table-of-contents__link">Importance of <code>synchronize</code></a></li><li><a href="#observing-changes-to-channel-list" class="table-of-contents__link">Observing changes to Channel List</a></li></ul></li><li><a href="#paginating-channel-list" class="table-of-contents__link">Paginating Channel List</a></li><li><a href="#marking-all-channels-as-read" class="table-of-contents__link">Marking all Channels as Read</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/stream-chat" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://twitter.com/getstream_io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/GetStream/stream-chat-swift" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Stream.io, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/stream-chat-swift/assets/js/styles.725bd164.js"></script>
<script src="/stream-chat-swift/assets/js/runtime~main.0ada098c.js"></script>
<script src="/stream-chat-swift/assets/js/main.b0a9bf59.js"></script>
<script src="/stream-chat-swift/assets/js/1.fdcd1e01.js"></script>
<script src="/stream-chat-swift/assets/js/2.c4a5c1e3.js"></script>
<script src="/stream-chat-swift/assets/js/3.cf062860.js"></script>
<script src="/stream-chat-swift/assets/js/1be78505.5242f7cc.js"></script>
<script src="/stream-chat-swift/assets/js/56.f7fc442b.js"></script>
<script src="/stream-chat-swift/assets/js/935f2afb.ddf29bbf.js"></script>
<script src="/stream-chat-swift/assets/js/17896441.d1c47389.js"></script>
<script src="/stream-chat-swift/assets/js/a5e1adf8.f05128c1.js"></script>
</body>
</html>