{"remainingRequest":"/Users/dmigach/Desktop/stream-chat-swift/stream-chat-swift-docs/node_modules/babel-loader/lib/index.js??ref--12-1!/Users/dmigach/Desktop/stream-chat-swift/stream-chat-swift-docs/node_modules/@docusaurus/mdx-loader/src/index.js??ref--12-2!/Users/dmigach/Desktop/stream-chat-swift/stream-chat-swift-docs/node_modules/@docusaurus/plugin-content-docs/lib/markdown/index.js??ref--12-3!/Users/dmigach/Desktop/stream-chat-swift/stream-chat-swift-docs/docs/guides/working-with-messages.md","dependencies":[{"path":"/Users/dmigach/Desktop/stream-chat-swift/stream-chat-swift-docs/docs/guides/working-with-messages.md","mtime":1622479040881},{"path":"/Users/dmigach/Desktop/stream-chat-swift/stream-chat-swift-docs/.docusaurus/docusaurus-plugin-content-docs/default/site-docs-guides-working-with-messages-md-449.json","mtime":1621878602953},{"path":"/Users/dmigach/Desktop/stream-chat-swift/stream-chat-swift-docs/node_modules/cache-loader/dist/cjs.js","mtime":1621247292444},{"path":"/Users/dmigach/Desktop/stream-chat-swift/stream-chat-swift-docs/node_modules/babel-loader/lib/index.js","mtime":1621247292381},{"path":"/Users/dmigach/Desktop/stream-chat-swift/stream-chat-swift-docs/node_modules/@docusaurus/mdx-loader/src/index.js","mtime":1621247302486},{"path":"/Users/dmigach/Desktop/stream-chat-swift/stream-chat-swift-docs/node_modules/@docusaurus/plugin-content-docs/lib/markdown/index.js","mtime":1621247301494}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9leHRlbmRzIGZyb20iL1VzZXJzL2RtaWdhY2gvRGVza3RvcC9zdHJlYW0tY2hhdC1zd2lmdC9zdHJlYW0tY2hhdC1zd2lmdC1kb2NzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzIjtpbXBvcnQgUmVhY3QgZnJvbSdyZWFjdCc7aW1wb3J0e21keH1mcm9tJ0BtZHgtanMvcmVhY3QnO2V4cG9ydCBjb25zdCBmcm9udE1hdHRlcj17dGl0bGU6J1dvcmtpbmcgd2l0aCBNZXNzYWdlcyd9O2V4cG9ydCBjb25zdCBtZXRhZGF0YT17InVudmVyc2lvbmVkSWQiOiJndWlkZXMvd29ya2luZy13aXRoLW1lc3NhZ2VzIiwiaWQiOiJndWlkZXMvd29ya2luZy13aXRoLW1lc3NhZ2VzIiwiaXNEb2NzSG9tZVBhZ2UiOmZhbHNlLCJ0aXRsZSI6Ildvcmtpbmcgd2l0aCBNZXNzYWdlcyIsImRlc2NyaXB0aW9uIjoiTWVzc2FnZSBvYmplY3QiLCJzb3VyY2UiOiJAc2l0ZS9kb2NzL2d1aWRlcy93b3JraW5nLXdpdGgtbWVzc2FnZXMubWQiLCJzbHVnIjoiL2d1aWRlcy93b3JraW5nLXdpdGgtbWVzc2FnZXMiLCJwZXJtYWxpbmsiOiIvc3RyZWFtLWNoYXQtc3dpZnQvZ3VpZGVzL3dvcmtpbmctd2l0aC1tZXNzYWdlcyIsImVkaXRVcmwiOiJodHRwczovL2dpdGh1Yi5jb20vR2V0U3RyZWFtL3N0cmVhbS1jaGF0LXN3aWZ0L2VkaXQvbWFpbi9zdHJlYW0tY2hhdC1zd2lmdC1kb2NzL2RvY3MvZ3VpZGVzL3dvcmtpbmctd2l0aC1tZXNzYWdlcy5tZCIsInZlcnNpb24iOiJjdXJyZW50Iiwic2lkZWJhciI6ImRvY3MiLCJwcmV2aW91cyI6eyJ0aXRsZSI6Ildvcmtpbmcgd2l0aCBhIENoYW5uZWwiLCJwZXJtYWxpbmsiOiIvc3RyZWFtLWNoYXQtc3dpZnQvZ3VpZGVzL3dvcmtpbmctd2l0aC1hLWNoYW5uZWwifSwibmV4dCI6eyJ0aXRsZSI6Ildvcmtpbmcgd2l0aCBVc2VyIiwicGVybWFsaW5rIjoiL3N0cmVhbS1jaGF0LXN3aWZ0L2d1aWRlcy93b3JraW5nLXdpdGgtdXNlciJ9fTsvKiBAanN4UnVudGltZSBjbGFzc2ljICovIC8qIEBqc3ggbWR4ICovZXhwb3J0IGNvbnN0IHRvYz1be3ZhbHVlOidNZXNzYWdlIG9iamVjdCcsaWQ6J21lc3NhZ2Utb2JqZWN0JyxjaGlsZHJlbjpbXX0se3ZhbHVlOidPcHRpbWlzdGljIHVwZGF0ZXMnLGlkOidvcHRpbWlzdGljLXVwZGF0ZXMnLGNoaWxkcmVuOltdfSx7dmFsdWU6J0dldCBhIE1lc3NhZ2UgYnkgaXRzIElEJyxpZDonZ2V0LWEtbWVzc2FnZS1ieS1pdHMtaWQnLGNoaWxkcmVuOltdfSx7dmFsdWU6J0NyZWF0ZSBhIG1lc3NhZ2UnLGlkOidjcmVhdGUtYS1tZXNzYWdlJyxjaGlsZHJlbjpbXX0se3ZhbHVlOidIb3cgc2VuZGluZyBhIG1lc3NhZ2Ugd29ya3MnLGlkOidob3ctc2VuZGluZy1hLW1lc3NhZ2Utd29ya3MnLGNoaWxkcmVuOltdfSx7dmFsdWU6J0VkaXQgYSBtZXNzYWdlJyxpZDonZWRpdC1hLW1lc3NhZ2UnLGNoaWxkcmVuOltdfSx7dmFsdWU6J0RlbGV0ZSBhIG1lc3NhZ2UnLGlkOidkZWxldGUtYS1tZXNzYWdlJyxjaGlsZHJlbjpbXX0se3ZhbHVlOidSZXBseSBhIG1lc3NhZ2UnLGlkOidyZXBseS1hLW1lc3NhZ2UnLGNoaWxkcmVuOltdfV07Y29uc3QgbGF5b3V0UHJvcHM9e3RvY307Y29uc3QgTURYTGF5b3V0PSJ3cmFwcGVyIjtleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBNRFhDb250ZW50KHtjb21wb25lbnRzLC4uLnByb3BzfSl7cmV0dXJuIG1keChNRFhMYXlvdXQsX2V4dGVuZHMoe30sbGF5b3V0UHJvcHMscHJvcHMse2NvbXBvbmVudHM6Y29tcG9uZW50cyxtZHhUeXBlOiJNRFhMYXlvdXQifSksbWR4KCJoMiIseyJpZCI6Im1lc3NhZ2Utb2JqZWN0In0sYE1lc3NhZ2Ugb2JqZWN0YCksbWR4KCJwIixudWxsLGBBIG1lc3NhZ2UgaXMgcmVwcmVzZW50ZWQgYnkgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYENoYXRNZXNzYWdlYCksYCBtb2RlbC4KRGVwZW5kaW5nIG9uIGNvbWJpbmF0aW9uIG9mIGl0cyBwcm9wZXJ0aWVzIG1lc3NhZ2VzIGFwcGVhciBkaWZmZXJlbnRseSwgYSBzY3JlZW5zaG90IG9uIHRoZSBsZWZ0IHNob3djYXNlcyB0aGUgbW9zdCBjb21tb24gdHlwZXMgb2YgbWVzc2FnZXMuIEEgc2NyZWVuc2hvdCBvbiB0aGUgcmlnaHQgc2hvd3MgaG93IHNvbWUgb2YgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYENoYXRNZXNzYWdlYCksYCBwcm9wZXJ0aWVzIGFyZSByZWZsZWN0ZWQgaW4gdmlld3M6YCksbWR4KCJpbWciLHtzcmM6Ii4uL2ltZy9tZXNzYWdlcy1zaG93Y2FzZS5wbmciLHdpZHRoOiI0MCUifSksbWR4KCJpbWciLHtzcmM6Ii4uL2ltZy9tZXNzYWdlcy1wcm9wZXJ0aWVzLnBuZyIsd2lkdGg6IjQwJSJ9KSxtZHgoImgyIix7ImlkIjoib3B0aW1pc3RpYy11cGRhdGVzIn0sYE9wdGltaXN0aWMgdXBkYXRlc2ApLG1keCgicCIsbnVsbCxgT3B0aW1pc3RpYyB1cGRhdGVzIG1vZGVsIGlzIGFwcGxpZWQgdG8gbWVzc2FnZXMsIG1lYW5pbmcgdGhhdCB3aGVuIHRoZXJlIGlzIGEgY2hhbmdlIHRvIGxvY2FsIG1lc3NhZ2VzIHN0YXRlIGl0IGlzIHByb3BhZ2F0ZWQgdG8gY2hhdCBjb21wb25lbnRzIHNvIGl0IGlzIGRpc3BsYXllZCBmb3IgdXNlcnMgcmlnaHQgYXdheSBhbmQgdGhlbiBpdCdzIHN5bmNocm9uaXplZCB3aXRoIGJhY2tlbmQuIEluIGNhc2Ugb2Ygc3luY2hyb25pemF0aW9uIGZhaWx1cmUgdXNlcnMgbWF5IGJlIHByb21wdGVkIHRvIHJldHJ5IHRoZSBmYWlsZWQgYWN0aW9uLmApLG1keCgiaW1nIix7c3JjOiIuLi9pbWcvbWVzc2FnZS1mYWlsdXJlLXJlc2VuZC5wbmciLHdpZHRoOiIzMCUifSksbWR4KCJwIixudWxsLGBUaGlzIG1ha2VzIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBMb2NhbE1lc3NhZ2VTdGF0ZWApLGAgb25lIG9mIHRoZSBtb3N0IGltcG9ydGFudCBwcm9wZXJ0aWVzIGluIG1lc3NhZ2UncyBsaWZlY3ljbGUsIGJlY2F1c2UgaXQncyB1c2VkIGZvciBrZWVwaW5nIG1lc3NhZ2VzIGluIHN5bmMgd2l0aCBiYWNrZW5kLmApLG1keCgiaDIiLHsiaWQiOiJnZXQtYS1tZXNzYWdlLWJ5LWl0cy1pZCJ9LGBHZXQgYSBNZXNzYWdlIGJ5IGl0cyBJRGApLG1keCgicCIsbnVsbCxgWW91IGNhbiBnZXQgYSBzaW5nbGUgbWVzc2FnZSBieSBpdHMgSUQ6YCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIix7cGFyZW50TmFtZToicHJlIiwiY2xhc3NOYW1lIjoibGFuZ3VhZ2Utc3dpZnQifSxgaW1wb3J0IFN0cmVhbUNoYXQgCgovLy8gVXNlIHRoZSBcYENoYXRDbGllbnRcYCB0byBjcmVhdGUgYQovLy8gXGBDaGF0TWVzc2FnZUNvbnRyb2xsZXJcYCB3aXRoIHRoZSBcYENoYW5uZWxJZFxgLiAKbGV0IG1lc3NhZ2VDb250cm9sbGVyID0gY2hhdENsaWVudC5tZXNzYWdlQ29udHJvbGxlcigKICAgY2lkOiBDaGFubmVsSWQodHlwZTogLm1lc3NhZ2luZywgaWQ6ICJnZW5lcmFsIiksCiAgIG1lc3NhZ2VJZDogIm1lc3NhZ2UtaWQiIAopIAoKLy8vIEdldCB0aGUgbWVzc2FnZSAKbWVzc2FnZUNvbnRyb2xsZXIuc3luY2hyb25pemUgeyBlcnJvciBpbiAKICAgLy8gaGFuZGxlIHBvc3NpYmxlIGVycm9ycyAvIGFjY2VzcyBtZXNzYWdlIAogICBwcmludChlcnJvciA/PyBtZXNzYWdlQ29udHJvbGxlci5tZXNzYWdlISkgCn0gCmApKSxtZHgoImgyIix7ImlkIjoiY3JlYXRlLWEtbWVzc2FnZSJ9LGBDcmVhdGUgYSBtZXNzYWdlYCksbWR4KCJwIixudWxsLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgQ29tcG9zZXJWQ2ApLGAgaXMgYSBVSSBjb21wb25lbnQgdGhhdCBoYW5kbGVzIG1lc3NhZ2VzIGNyZWF0aW9uOmApLG1keCgiaW1nIix7c3JjOiIuLi9pbWcvY29tcG9zZXItdWkucG5nIix3aWR0aDoiNTAlIn0pLG1keCgicCIsbnVsbCxgSWYgeW91IGFyZSB1c2luZyB5b3VyIG93biBjb21wb25lbnQgZm9yIGEgbWVzc2FnZSBjb21wb3NlciB5b3UgY2FuIHVzZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgQ2hhdENoYW5uZWxDb250cm9sbGVyYCksYCB0byBjcmVhdGUgbWVzc2FnZXM6YCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIix7cGFyZW50TmFtZToicHJlIiwiY2xhc3NOYW1lIjoibGFuZ3VhZ2Utc3dpZnQifSxgbGV0IGNvbnRyb2xsZXIgPSBDaGF0Q2hhbm5lbENvbnRyb2xsZXIoCiAgICBjaGFubmVsUXVlcnk6IENoYW5uZWxRdWVyeShjaWQ6IENoYW5uZWxJZCh0eXBlOiAubWVzc2FnaW5nLCBpZDogImdlbmVyYWwiKSksCiAgICBjbGllbnQ6IGNsaWVudAopCmNvbnRyb2xsZXIuY3JlYXRlTmV3TWVzc2FnZSgKICAgIHRleHQ6ICJIZWxsbyBXb3JsZCEiLAogICAgcGlubmluZzogLm5vRXhwaXJhdGlvbiwKICAgIGF0dGFjaG1lbnRzOiBbaW1hZ2VdLAogICAgcXVvdGVkTWVzc2FnZUlkOiBxdW90ZWRNZXNzYWdlLmlkLAogICAgY29tcGxldGlvbjogeyByZXN1bHQgaW4KICAgICAgICBzd2l0Y2ggcmVzdWx0IHsKICAgICAgICBjYXNlIC5zdWNjZXNzKGxldCBtZXNzYWdlSWQpOgogICAgICAgICAgICBwcmludChtZXNzYWdlSWQpCiAgICAgICAgY2FzZSAuZmFpbHVyZShsZXQgZXJyb3IpOgogICAgICAgICAgICBwcmludChlcnJvcikKICAgICAgICB9CiAgICB9CikKYCkpLG1keCgicCIsbnVsbCxgTW9yZSBpbmZvIG9uIGAsbWR4KCJhIix7cGFyZW50TmFtZToicCIsImhyZWYiOiIvc3RyZWFtLWNoYXQtc3dpZnQvZ3VpZGVzL3Bpbm5lZC1tZXNzYWdlcyJ9LGBQaW5uaW5nYCksYCBhbmQgYCxtZHgoImEiLHtwYXJlbnROYW1lOiJwIiwiaHJlZiI6Ii9zdHJlYW0tY2hhdC1zd2lmdC9ndWlkZXMvd29ya2luZy13aXRoLWF0dGFjaG1lbnRzIn0sYEF0dGFjaG1lbnRzYCksYCBjYW4gYmUgZm91bmQgaW4gY29ycmVzcG9uZGluZyBndWlkZXMuYCksbWR4KCJwIixudWxsLGBNb3JlIG9uIGAsbWR4KCJhIix7cGFyZW50TmFtZToicCIsImhyZWYiOiIjcmVwbHlpbmctYS1tZXNzYWdlIn0sYFF1b3RlZGApLGAgIG1lc3NhZ2VzIGNvdWxkIGJlIGZvdW5kIGluIHRoaXMgZ3VpZGUgYmVsb3cuYCksbWR4KCJoMiIseyJpZCI6Imhvdy1zZW5kaW5nLWEtbWVzc2FnZS13b3JrcyJ9LGBIb3cgc2VuZGluZyBhIG1lc3NhZ2Ugd29ya3NgKSxtZHgoInAiLG51bGwsYFdoZW4gYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYGNyZWF0ZU5ld01lc3NhZ2VgKSxgIGlzIGNhbGxlZCwgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYENoYXRDaGFubmVsQ29udHJvbGxlcmApLGAgY3JlYXRlcyBhIG5ldyBtZXNzYWdlIGxvY2FsbHkgYW5kIHNjaGVkdWxlcyBpdCBmb3Igc2VuZC5gKSxtZHgoInAiLG51bGwsYFVwbG9hZGluZyBpcyBoYW5kbGVkIGJ5IGFuIGludGVybmFsIGVudGl0eSBjYWxsZWQgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYE1lc3NhZ2VTZW5kZXJgKSxgLiBJdCBhdXRvbWF0aWNhbGx5IHN0YXJ0cwp1cGxvYWRpbmcgd2hlbiBpdCBkZXRlY3RzIGxvY2FsbHkgY2FjaGVkIG1lc3NhZ2VzIHdpdGggYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYC5wZW5kaW5nU2VuZGApLGAgc3RhdGUuIGApLG1keCgicCIsbnVsbCxgVGhlcmUgaXMgbm8gbmVlZCB0byB0YWtlIGNhcmUgb2YgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYE1lc3NhZ2VTZW5kZXJgKSxgLCBpdCBpcyBjcmVhdGVkIGFuZCBhZGRlZCB0byB0aGUgbGlzdCBvZiBiYWNrZ3JvdW5kIHdvcmtlcnMgYnkgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYENoYXRDbGllbnRgKSxgLmApLG1keCgicCIsbnVsbCxgU2VuZGluZyBvZiB0aGUgbWVzc2FnZSBoYXMgdGhlIGZvbGxvd2luZyBwaGFzZXM6YCksbWR4KCJvbCIsbnVsbCxtZHgoImxpIix7cGFyZW50TmFtZToib2wifSxgV2hlbiBhIG1lc3NhZ2Ugd2l0aCBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6ImxpIn0sYC5wZW5kaW5nU2VuZGApLGAgc3RhdGUgbG9jYWwgc3RhdGUgYXBwZWFycyBpbiB0aGUgZGIsIHRoZSBzZW5kZXIgcXVldWVzIGl0IGluIHRoZSBzZW5kaW5nIHF1ZXVlIGZvciB0aGUgY2hhbm5lbCB0aGUgbWVzc2FnZSBiZWxvbmdzIHRvLmApLG1keCgibGkiLHtwYXJlbnROYW1lOiJvbCJ9LGBUaGUgcGVuZGluZyBtZXNzYWdlcyBhcmUgc2VuZCBvbmUgYnkgb25lIG9yZGVyIGJ5IHRoZWlyIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToibGkifSxgbG9jYWxseUNyZWF0ZWRBdGApLGAgdmFsdWUgYXNjZW5kaW5nLmApLG1keCgibGkiLHtwYXJlbnROYW1lOiJvbCJ9LGBXaGVuIHRoZSBtZXNzYWdlIGlzIGJlaW5nIHNlbnQsIGl0cyBsb2NhbCBzdGF0ZSBpcyBjaGFuZ2VkIHRvIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToibGkifSxgLnNlbmRpbmdgKSksbWR4KCJsaSIse3BhcmVudE5hbWU6Im9sIn0sYElmIHRoZSBvcGVyYXRpb24gaXMgc3VjY2Vzc2Z1bCwgdGhlIGxvY2FsIHN0YXRlIG9mIHRoZSBtZXNzYWdlIGlzIGNoYW5nZWQgdG8gYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJsaSJ9LGBuaWxgKSxgLiBJZiB0aGUgb3BlcmF0aW9uIGZhaWxzLCB0aGUgbG9jYWwgc3RhdGUgb2YgaXMgY2hhbmdlZCB0byBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6ImxpIn0sYHNlbmRpbmdGYWlsZWRgKSxgLmApKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLHtwYXJlbnROYW1lOiJwcmUifSxgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4pSM4pSA4pSA4pa2ICBcYG5pbFxgIGlmIHN1Y2Nlc3MgCiAgXGBwZW5kaW5nU2VuZFxgIOKUgOKUgOKUgOKUgOKUgOKUgOKWtiBcYHNlbmRpbmdcYCDilIDilIDilKQgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKUlOKUgOKWtiAgIFxgc2VuZGluZ0ZhaWxlZFxgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCmApKSxtZHgoInAiLG51bGwsYFRoaXMgYmVoYXZpb3IgbWFrZXMgaXQgcG9zc2libGUgdG8gdXBkYXRlIHlvdXIgVUkgd2l0aCB0aGUgbmV3IG1lc3NhZ2UgaW1tZWRpYXRlbHkgd2l0aG91dCBibG9ja2luZyB0aGUgVUk6YCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIix7cGFyZW50TmFtZToicHJlIiwiY2xhc3NOYW1lIjoibGFuZ3VhZ2Utc3dpZnQifSxgY2xhc3MgTXlDaGFubmVsVmlld0NvbnRyb2xsZXI6IFVJVmlld0NvbnRyb2xsZXIgewogICAgbGV0IGNvbnRyb2xsZXIgPSBDaGFubmVsQ29udHJvbGxlcihjaWQ6IDwjQ2hhbm5lbElkIz4pCgogICAgZnVuYyBzZW5kTWVzc2FnZSh0ZXh0OiBTdHJpbmcpIHsKICAgICAgICAvLyBUaGlzIG1ldGhvZCBjcmVhdGVzIGEgbmV3IG1lc3NhZ2UgbG9jYWxseSwKICAgICAgICAvLyBpbml0aWFsbHkgd2l0aCBcYGxvY2FsU3RhdGUgPT0gLnBlbmRpbmdTZW5kXGAKICAgICAgICBjb250cm9sbGVyLmNyZWF0ZU5ld01lc3NhZ2UodGV4dDogdGV4dCkKICAgIH0KCiAgICAvLyBFeGFtcGxlIGhhbmRsaW5nIGZvciBNZXNzYWdlIGxvY2FsIHN0YXRlOgogICAgZnVuYyB0YWJsZVZpZXcoCiAgICAgICAgXyB0YWJsZVZpZXc6IFVJVGFibGVWaWV3LAogICAgICAgICBjZWxsRm9yUm93QXQgaW5kZXhQYXRoOiBJbmRleFBhdGgKICAgICkgLT4gVUlUYWJsZVZpZXdDZWxsIHsgCiAgICAgICAgLi4uCiAgICAgICAgbGV0IG1lc3NhZ2UgPSBjb250cm9sbGVyLm1lc3NhZ2VzW2luZGV4UGF0aC5yb3ddCiAgICAgICAgaWYgbWVzc2FnZS5sb2NhbFN0YXRlID09IC5wZW5kaW5nU2VuZCB7CiAgICAgICAgICAgIC8vIHNob3cgbWVzc2FnZSBhcyBwZW5kaW5nIHNlbmQKCiAgICAgICAgfSBlbHNlIGlmIG1lc3NhZ2UubG9jYWxTdGF0ZSA9PSAuc2VuZGluZ0ZhaWxlZCB7CiAgICAgICAgICAgIC8vIHNob3cgcmV0cnkgYnV0dG9uIGZvciB0aGUgbWVzc2FnZQogICAgICAgIH0KICAgICAgICAuLi4KICAgIH0KfQpgKSksbWR4KCJkaXYiLHsiY2xhc3NOYW1lIjoiYWRtb25pdGlvbiBhZG1vbml0aW9uLWluZm8gYWxlcnQgYWxlcnQtLWluZm8ifSxtZHgoImRpdiIse3BhcmVudE5hbWU6ImRpdiIsImNsYXNzTmFtZSI6ImFkbW9uaXRpb24taGVhZGluZyJ9LG1keCgiaDUiLHtwYXJlbnROYW1lOiJkaXYifSxtZHgoInNwYW4iLHtwYXJlbnROYW1lOiJoNSIsImNsYXNzTmFtZSI6ImFkbW9uaXRpb24taWNvbiJ9LG1keCgic3ZnIix7cGFyZW50TmFtZToic3BhbiIsInhtbG5zIjoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLCJ3aWR0aCI6IjE0IiwiaGVpZ2h0IjoiMTYiLCJ2aWV3Qm94IjoiMCAwIDE0IDE2In0sbWR4KCJwYXRoIix7cGFyZW50TmFtZToic3ZnIiwiZmlsbFJ1bGUiOiJldmVub2RkIiwiZCI6Ik03IDIuM2MzLjE0IDAgNS43IDIuNTYgNS43IDUuN3MtMi41NiA1LjctNS43IDUuN0E1LjcxIDUuNzEgMCAwIDEgMS4zIDhjMC0zLjE0IDIuNTYtNS43IDUuNy01Ljd6TTcgMUMzLjE0IDEgMCA0LjE0IDAgOHMzLjE0IDcgNyA3IDctMy4xNCA3LTctMy4xNC03LTctN3ptMSAzSDZ2NWgyVjR6bTAgNkg2djJoMnYtMnoifSkpKSxgaW5mb2ApKSxtZHgoImRpdiIse3BhcmVudE5hbWU6ImRpdiIsImNsYXNzTmFtZSI6ImFkbW9uaXRpb24tY29udGVudCJ9LG1keCgicCIse3BhcmVudE5hbWU6ImRpdiJ9LGBXaGVuIGEgbWVzc2FnZSBpcyBjcmVhdGVkIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBDaGFubmVsQ29udHJvbGxlcmApLGAgc2VuZHMgYCxtZHgoImVtIix7cGFyZW50TmFtZToicCJ9LGBzdG9wIHR5cGluZyBldmVudGApLGAgZm9yIHRoaXMgY2hhbm5lbGApKSksbWR4KCJoMiIseyJpZCI6ImVkaXQtYS1tZXNzYWdlIn0sYEVkaXQgYSBtZXNzYWdlYCksbWR4KCJwIixudWxsLGBUaGVyZSBpcyBhbiBhY3Rpb24gZm9yIGVkaXRpbmcgbWVzc2FnZXM6YCksbWR4KCJpbWciLHtzcmM6Ii4uL2ltZy9tZXNzYWdlcy1hY3Rpb25zLnBuZyIsd2lkdGg6IjI1JSJ9KSxtZHgoInAiLG51bGwsYFdoZW4gYSB1c2VyIGlzIGVkaXRpbmcgYSBtZXNzYWdlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBDb21wb3NlclZDYCksYCB0YWtlcyB0aGUgZm9sbG93aW5nIGFwcGVhcmFuY2U6YCksbWR4KCJpbWciLHtzcmM6Ii4uL2ltZy9jb21wb3Nlci1lZGl0LnBuZyIsd2lkdGg6IjUwJSJ9KSxtZHgoInAiLG51bGwsYElmIHlvdSB1c2UgeW91ciBvd24gaW1wbGVtZW50YXRpb24gZm9yIGNvbXBvc2VyIHZpZXcsIHRoZSBzYW1lIGNvdWxkIGJlIGRvbmUgd2l0aCBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgQ2hhdE1lc3NhZ2VDb250cm9sbGVyYCksYDpgKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLHtwYXJlbnROYW1lOiJwcmUiLCJjbGFzc05hbWUiOiJsYW5ndWFnZS1zd2lmdCJ9LGBsZXQgbWVzc2FnZUNvbnRyb2xsZXIgPSBjaGF0Q2xpZW50Lm1lc3NhZ2VDb250cm9sbGVyKAogICAgY2lkOiBjaGFubmVsSWQsCiAgICBtZXNzYWdlSWQ6IG1lc3NhZ2VJZAopIAptZXNzYWdlQ29udHJvbGxlci5lZGl0TWVzc2FnZSh0ZXh0OiAiV29ybGQgSGVsbG8hIikgeyBlcnJvciBpbgogICAgaWYgbGV0IGVycm9yID0gZXJyb3IgewogICAgICAgIHByaW50KGVycm9yKQogICAgfQp9CmApKSxtZHgoInAiLG51bGwsYEVkaXRpbmcgYSBtZXNzYWdlIGhhcyBzZXZlcmFsIHBoYXNlczpgKSxtZHgoInAiLG51bGwsbWR4KCJzdHJvbmciLHtwYXJlbnROYW1lOiJwIn0sbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToic3Ryb25nIn0sYE1lc3NhZ2VNb2RlbC5sb2NhbFN0YXRlYCksYCBzdGF0ZXMgd2hlbiBlZGl0aW5nIGEgbWVzc2FnZTpgKSksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIix7cGFyZW50TmFtZToicHJlIn0sYCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKUjOKUgOKUgOKWtiAgXGBuaWxcYCBpZiBzdWNjZXNzIAogIFxgcGVuZGluZ1N5bmNcYCDilIDilIDilIDilIDilIDilIDilrYgXGBzeW5jaW5nXGAg4pSA4pSA4pSkICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDilJTilIDilrYgICBcYHN5bmNpbmdGYWlsZWRcYCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIApgKSksbWR4KCJwIixudWxsLGBUaGlzIGJlaGF2aW9yIG1ha2VzIGl0IHBvc3NpYmxlIHRvIHVwZGF0ZSB5b3VyIFVJIHdpdGggdGhlIHVwZGF0ZWQgbWVzc2FnZSBpbW1lZGlhdGVseSB3aXRob3V0IGJsb2NraW5nIHRoZSBVSTpgKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLHtwYXJlbnROYW1lOiJwcmUiLCJjbGFzc05hbWUiOiJsYW5ndWFnZS1zd2lmdCJ9LGBjbGFzcyBNeUNoYW5uZWxWaWV3Q29udHJvbGxlcjogVUlWaWV3Q29udHJvbGxlciB7CiAgICBsZXQgY29udHJvbGxlciA9IENoYW5uZWxDb250cm9sbGVyKGNpZDogPCNDaGFubmVsSWQjPikKCiAgICBmdW5jIGVkaXRNZXNzYWdlKG1lc3NhZ2U6IENoYXRNZXNzYWdlLCB0ZXh0OiBTdHJpbmcpIHsKICAgICAgICBsZXQgbWVzc2FnZUNvbnRyb2xsZXIgPSBjb250cm9sbGVyLmNsaWVudC5tZXNzYWdlQ29udHJvbGxlcigKICAgICAgICAgICAgY2lkOiA8I0NoYW5uZWxJZCM+LAogICAgICAgICAgICBtZXNzYWdlSWQ6IG1lc3NhZ2UuaWQKICAgICAgICApCgogICAgICAgIC8vIFRoaXMgbWV0aG9kIHVwZGF0ZXMgYSBtZXNzYWdlIGxvY2FsbHkKICAgICAgICAvLyB3aXRoIHRoZSBcYGxvY2FsU3RhdGUgPT0gLnBlbmRpbmdTeW5jXGAKICAgICAgICBtZXNzYWdlQ29udHJvbGxlci5lZGl0TWVzc2FnZSh0ZXh0OiB0ZXh0KQogICAgfQoKICAgIC8vIEV4YW1wbGUgaGFuZGxpbmcgZm9yIE1lc3NhZ2UgbG9jYWwgc3RhdGU6CiAgICBmdW5jIHRhYmxlVmlldygKICAgICAgICBfIHRhYmxlVmlldzogVUlUYWJsZVZpZXcsCiAgICAgICAgY2VsbEZvclJvd0F0IGluZGV4UGF0aDogSW5kZXhQYXRoCiAgICApIC0+IFVJVGFibGVWaWV3Q2VsbCB7IAogICAgICAgIC4uLgogICAgICAgIGxldCBtZXNzYWdlID0gY29udHJvbGxlci5tZXNzYWdlc1tpbmRleFBhdGgucm93XQogICAgICAgIGlmIG1lc3NhZ2UubG9jYWxTdGF0ZSA9PSAucGVuZGluZ1N5bmMgewogICAgICAgICAgICAvLyBzaG93IG1lc3NhZ2UgYXMgbm90IGJlaW5nIHN5bmNlZCB3aXRoIHRoZSBzZXJ2ZXJzCgogICAgICAgIH0gZWxzZSBpZiBtZXNzYWdlLmxvY2FsU3RhdGUgPT0gLnN5bmNpbmdGYWlsZWQgewogICAgICAgICAgICAvLyBzaG93IHJldHJ5IGJ1dHRvbgogICAgICAgIH0KICAgICAgICAuLi4KICAgIH0KfQpgKSksbWR4KCJoMiIseyJpZCI6ImRlbGV0ZS1hLW1lc3NhZ2UifSxgRGVsZXRlIGEgbWVzc2FnZWApLG1keCgicCIsbnVsbCxgQSBtZXNzYWdlIGNhbiBiZSBkZWxldGVkIHdpdGggdGhlIGNvcnJlc3BvbmRpbmcgYWN0aW9uOmApLG1keCgiaW1nIix7c3JjOiIuLi9pbWcvbWVzc2FnZXMtYWN0aW9ucy5wbmciLHdpZHRoOiIyNSUifSksbWR4KCJwIixudWxsLGBXaGVuIGEgdXNlciBkZWxldGVzIGEgbWVzc2FnZSBpdCB3aWxsIGJlIGhpZGRlbiBmb3IgYWxsIHRoZSByZXN0IHVzZXJzIGluIGNvbnZlcnNhdGlvbiwgYnV0IGl0IHdpbGwgYXBwZWFyIGZvciB0aGUgdXNlciB3aG8gZGVsZXRlZCBpdCBsaWtlIHRoaXM6YCksbWR4KCJpbWciLHtzcmM6Ii4uL2ltZy9tZXNzYWdlLWRlbGV0ZS5wbmciLHdpZHRoOiI1MCUifSksbWR4KCJwIixudWxsLGBJbiBhbiB1cGNvbWluZyB2ZXJzaW9uIGl0IHdpbGwgYmVjb21lIGN1c3RvbWl6YWJsZSwgc28gaXQgd2lsbCBiZSBwb3NzaWJsZSB0byBoaWRlIGRlbGV0ZWQgbWVzc2FnZXMgZm9yIGFsbCBwYXJ0aWNpcGFudHMgaW4gYSBjb252ZXJzYXRpb24uYCksbWR4KCJwIixudWxsLGBNZXNzYWdlIGRlbGV0aW9uIGlzIGhhbmRsZWQgYnkgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYENoYXRNZXNzYWdlQ29udHJvbGxlcmApLGA6YCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIix7cGFyZW50TmFtZToicHJlIiwiY2xhc3NOYW1lIjoibGFuZ3VhZ2Utc3dpZnQifSxgbGV0IG1lc3NhZ2VDb250cm9sbGVyID0gY2hhdENsaWVudC5tZXNzYWdlQ29udHJvbGxlcigKICAgIGNpZDogY2hhbm5lbElkLAogICAgbWVzc2FnZUlkOiBtZXNzYWdlSWQKKSAKbWVzc2FnZUNvbnRyb2xsZXIuZGVsZXRlTWVzc2FnZSB7IGVycm9yIGluCiAgICBpZiBsZXQgZXJyb3IgPSBlcnJvciB7CiAgICAgICAgcHJpbnQoZXJyb3IpCiAgICB9Cn0KYCkpLG1keCgicCIsbnVsbCxgSWYgdGhlIG1lc3NhZ2UgaGFzIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGAucGVuZGluZ1NlbmRgKSxgIG9yIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGAuc2VuZGluZ0ZhaWxlZGApLGAgc3RhdGUgaXQgd2lsbCBiZSByZW1vdmVkIGxvY2FsbHkgYXMgaXQgaGFzbid0IGJlZW4gc2VudCB5ZXQuYCksbWR4KCJwIixudWxsLGBJZiB0aGUgbWVzc2FnZSBoYXMgc29tZSBvdGhlciBsb2NhbCBzdGF0ZSBpdCBzaG91bGQgYmUgcmVtb3ZlZCBvbiB0aGUgYmFja2VuZC4KQmVmb3JlIHRoZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgZGVsZXRlYCksYCBuZXR3b3JrIGNhbGwgaGFwcGVucyB0aGUgbG9jYWwgc3RhdGUgaXMgc2V0IHRvIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBkZWxldGluZ2ApLGAgYW5kIGJhc2VkIG9uCnRoZSByZXNwb25zZSBpdCBiZWNvbWVzIGVpdGhlciBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgbmlsYCksYCBpZiByZXF1ZXN0IHN1Y2NlZWRzIG9yIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBkZWxldGluZ0ZhaWxlZGApLGAgaWYgcmVxdWVzdCBmYWlscy5gKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLHtwYXJlbnROYW1lOiJwcmUifSxgICAgICAgICAgICAgICAgIOKUjOKUgOKUgOKWtiAgXGBuaWxcYCBpZiBzdWNjZXNzIAogICBcYGRlbGV0aW5nXGAg4pSA4pSA4pSkICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAg4pSU4pSA4pa2ICBcYGRlbGV0aW5nRmFpbGVkXGAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIApgKSksbWR4KCJwIixudWxsLGBUaGlzIGJlaGF2aW9yIG1ha2VzIGl0IHBvc3NpYmxlIHRvIHVwZGF0ZSB5b3VyIFVJIHdpdGggdGhlIHVwZGF0ZWQgbWVzc2FnZSBpbW1lZGlhdGVseSB3aXRob3V0IGJsb2NraW5nIHRoZSBVSTpgKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLHtwYXJlbnROYW1lOiJwcmUiLCJjbGFzc05hbWUiOiJsYW5ndWFnZS1zd2lmdCJ9LGBjbGFzcyBNeUNoYW5uZWxWaWV3Q29udHJvbGxlcjogVUlWaWV3Q29udHJvbGxlciB7CiAgICBsZXQgY29udHJvbGxlciA9IENoYW5uZWxDb250cm9sbGVyKGNpZDogPCNDaGFubmVsSWQjPikKCiAgICBmdW5jIGRlbGV0ZU1lc3NhZ2UobWVzc2FnZTogTWVzc2FnZSkgewogICAgICAgIC8vIENyZWF0ZSBhIFxgTWVzc2FnZUNvbnRyb2xsZXJcYCBmb3IgdGhlIG1lc3NhZ2UgeW91IHdhbnQgdG8gZGVsZXRlCiAgICAgICAgbGV0IG1lc3NhZ2VDb250cm9sbGVyID0gY29udHJvbGxlci5jbGllbnQubWVzc2FnZUNvbnRyb2xsZXIoCiAgICAgICAgICAgIGNpZDogY2hhbm5lbENvbnRyb2xsZXIuY2hhbm5lbFF1ZXJ5LmNpZCwKICAgICAgICAgICAgbWVzc2FnZUlkOiBtZXNzYWdlLmlkCiAgICAgICAgKQoKICAgICAgICAvLyBEZWxldGUgdGhlIG1lc3NhZ2UKICAgICAgICBtZXNzYWdlQ29udHJvbGxlci5kZWxldGVNZXNzYWdlKCkKICAgIH0KCiAgICAvLyBFeGFtcGxlIGhhbmRsaW5nIGZvciBNZXNzYWdlIGxvY2FsIHN0YXRlOgogICAgZnVuYyB0YWJsZVZpZXcoCiAgICAgICAgXyB0YWJsZVZpZXc6IFVJVGFibGVWaWV3LAogICAgICAgIGNlbGxGb3JSb3dBdCBpbmRleFBhdGg6IEluZGV4UGF0aAogICAgKSAtPiBVSVRhYmxlVmlld0NlbGwgeyAKICAgICAgICAuLi4KICAgICAgICBsZXQgbWVzc2FnZSA9IGNvbnRyb2xsZXIubWVzc2FnZXNbaW5kZXhQYXRoLnJvd10KICAgICAgICBpZiBtZXNzYWdlLmxvY2FsU3RhdGUgPT0gLmRlbGV0aW5nIHsKICAgICAgICAgICAgLy8gc2hvdyBtZXNzYWdlIGFzIGJlaW5nIGRlbGV0ZWQKCiAgICAgICAgfSBlbHNlIGlmIG1lc3NhZ2UubG9jYWxTdGF0ZSA9PSAuZGVsZXRpbmdGYWlsZWQgewogICAgICAgICAgICAvLyBzaG93IHJldHJ5IGJ1dHRvbiBmb3IgZGVsZXRpbmcgdGhlIG1lc3NhZ2UKICAgICAgICB9CiAgICAgICAgLi4uCiAgICB9Cn0KYCkpLG1keCgiaDIiLHsiaWQiOiJyZXBseS1hLW1lc3NhZ2UifSxgUmVwbHkgYSBtZXNzYWdlYCksbWR4KCJwIixudWxsLGBUaGVyZSBhcmUgdHdvIHdheXMgb2YgcmVwbHlpbmcgYSBtZXNzYWdlOmApLG1keCgidWwiLG51bGwsbWR4KCJsaSIse3BhcmVudE5hbWU6InVsIn0sbWR4KCJwIix7cGFyZW50TmFtZToibGkifSxtZHgoInN0cm9uZyIse3BhcmVudE5hbWU6InAifSxgUXVvdGVkIHJlcGx5YCksYC5gKSxtZHgoInAiLHtwYXJlbnROYW1lOiJsaSJ9LGBJbiBjYXNlIGlmIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBDb21wb3NlclZDYCksYCBpcyB1c2VkIGl0IGxvb2tzIGxpa2UgdGhpcyBkdXJpbmcgY29tcG9zaW5nLCBhbmQgdGhlIHJlc3VsdGluZyBtZXNzYWdlIHdpbGwgc2hvdyBib3RoIHF1b3RlZCBtZXNzYWdlIGFuZCB0aGUgcmVwbHkgaXRzZWxmLmApLG1keCgiaW1nIix7c3JjOiIuLi9pbWcvY29tcG9zZXItcXVvdGVkLnBuZyIsd2lkdGg6IjUwJSJ9KSksbWR4KCJsaSIse3BhcmVudE5hbWU6InVsIn0sbWR4KCJwIix7cGFyZW50TmFtZToibGkifSxtZHgoInN0cm9uZyIse3BhcmVudE5hbWU6InAifSxgVGhyZWFkIHJlcGx5YCkpLG1keCgicCIse3BhcmVudE5hbWU6ImxpIn0sYCAgSW5pdGlhdGluZyBhIHRocmVhZCByZXBseSB0YWtlcyBhIHVzZXIgaW50byB0aHJlYWQgZGV0YWlscyBzY3JlZW4gYW5kIHRoZSByZXN1bHRpbmcgbWVzc2FnZSB3aWxsIGxvb2sgbGlrZSBhIG5vcm1hbCBtZXNzYWdlIHRoYXQgaXMgcGxhY2VkIGluc2lkZSB0aGUgdGhyZWFkLiBJdCBpcyBhbHNvIHBvc3NpYmxlIHRvIGR1cGxpY2F0ZSBpdCB0byB0aGUgcGFyZW50IGNoYW5uZWwuYCksbWR4KCJpbWciLHtzcmM6Ii4uL2ltZy90aHJlYWQtZGV0YWlscy5wbmciLHdpZHRoOiIzNSUifSksbWR4KCJwIix7cGFyZW50TmFtZToibGkifSxgICBBIG1lc3NhZ2Ugd2l0aCB0aHJlYWQgcmVwbGllcyBhcHBlYXJzIGxpa2UgdGhpczpgKSxtZHgoImltZyIse3NyYzoiLi4vaW1nL3RocmVhZC1yZXBseS5wbmciLHdpZHRoOiIzNSUifSkpKSxtZHgoInAiLG51bGwsYElmIHlvdSB1c2UgeW91ciBvd24gaW1wbGVtZW50YXRpb24gZm9yIG1lc3NhZ2UgY29tcG9zZXIgeW91IGNhbiBjcmVhdGUgYSBgLG1keCgic3Ryb25nIix7cGFyZW50TmFtZToicCJ9LGB0aHJlYWQgcmVwbHlgKSxgIGZvciBhIG1lc3NhZ2Ugd2l0aCBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgTWVzc2FnZUNvbnRyb2xsZXJgKSxgOmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIse3BhcmVudE5hbWU6InByZSIsImNsYXNzTmFtZSI6Imxhbmd1YWdlLXN3aWZ0In0sYGxldCBtZXNzYWdlQ29udHJvbGxlciA9IGNoYXRDbGllbnQubWVzc2FnZUNvbnRyb2xsZXIoCiAgICBjaWQ6IGNoYW5uZWxJZCwKICAgIG1lc3NhZ2VJZDogIm1lc3NhZ2UtaWQiCikKbWVzc2FnZUNvbnRyb2xsZXIuY3JlYXRlTmV3UmVwbHkoCiAgICB0ZXh0OiAiVGhyZWFkIHJlcGx5IiwKICAgIHBpbm5pbmc6IG5pbCwKICAgIGF0dGFjaG1lbnRzOiBbXSwKICAgIHNob3dSZXBseUluQ2hhbm5lbDogdHJ1ZSwKICAgIHF1b3RlZE1lc3NhZ2VJZDogbmlsCikKYCkpLG1keCgicCIsbnVsbCxgQSBgLG1keCgic3Ryb25nIix7cGFyZW50TmFtZToicCJ9LGBxdW90ZWQgcmVwbHlgKSxgIGNhbiBiZSBjcmVhdGVkIGxpa2UgdGhpczpgKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLHtwYXJlbnROYW1lOiJwcmUiLCJjbGFzc05hbWUiOiJsYW5ndWFnZS1zd2lmdCJ9LGBsZXQgY29udHJvbGxlciA9IENoYXRDaGFubmVsQ29udHJvbGxlcigKICAgIGNoYW5uZWxRdWVyeTogQ2hhbm5lbFF1ZXJ5KGNpZDogQ2hhbm5lbElkKHR5cGU6IC5tZXNzYWdpbmcsIGlkOiAiZ2VuZXJhbCIpKSwKICAgIGNsaWVudDogY2xpZW50CikKY2hhbm5lbENvbnRyb2xsZXIuY3JlYXRlTmV3TWVzc2FnZSgKICAgIHRleHQ6ICJRdW90ZWQgcmVwbHkiLAogICAgcGlubmluZzogbmlsLAogICAgYXR0YWNobWVudHM6IFtdLAogICAgcXVvdGVkTWVzc2FnZUlkOiAicXVvdGVkLW1lc3NhZ2UtaWQiCikKYCkpKTt9O01EWENvbnRlbnQuaXNNRFhDb21wb25lbnQ9dHJ1ZTs="},{"version":3,"sources":["/Users/dmigach/Desktop/stream-chat-swift/stream-chat-swift-docs/docs/guides/working-with-messages.md"],"names":["React","mdx","frontMatter","title","metadata","toc","value","id","children","layoutProps","MDXLayout","MDXContent","components","props","isMDXComponent"],"mappings":"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","sourcesContent":["\n  import React from 'react';\n  import { mdx } from '@mdx-js/react';\n\n  export const frontMatter = {\n\ttitle: 'Working with Messages'\n};\nexport const metadata = {\n  \"unversionedId\": \"guides/working-with-messages\",\n  \"id\": \"guides/working-with-messages\",\n  \"isDocsHomePage\": false,\n  \"title\": \"Working with Messages\",\n  \"description\": \"Message object\",\n  \"source\": \"@site/docs/guides/working-with-messages.md\",\n  \"slug\": \"/guides/working-with-messages\",\n  \"permalink\": \"/stream-chat-swift/guides/working-with-messages\",\n  \"editUrl\": \"https://github.com/GetStream/stream-chat-swift/edit/main/stream-chat-swift-docs/docs/guides/working-with-messages.md\",\n  \"version\": \"current\",\n  \"sidebar\": \"docs\",\n  \"previous\": {\n    \"title\": \"Working with a Channel\",\n    \"permalink\": \"/stream-chat-swift/guides/working-with-a-channel\"\n  },\n  \"next\": {\n    \"title\": \"Working with User\",\n    \"permalink\": \"/stream-chat-swift/guides/working-with-user\"\n  }\n};\n  /* @jsxRuntime classic */\n/* @jsx mdx */\n\nexport const toc = [{\n  value: 'Message object',\n  id: 'message-object',\n  children: []\n}, {\n  value: 'Optimistic updates',\n  id: 'optimistic-updates',\n  children: []\n}, {\n  value: 'Get a Message by its ID',\n  id: 'get-a-message-by-its-id',\n  children: []\n}, {\n  value: 'Create a message',\n  id: 'create-a-message',\n  children: []\n}, {\n  value: 'How sending a message works',\n  id: 'how-sending-a-message-works',\n  children: []\n}, {\n  value: 'Edit a message',\n  id: 'edit-a-message',\n  children: []\n}, {\n  value: 'Delete a message',\n  id: 'delete-a-message',\n  children: []\n}, {\n  value: 'Reply a message',\n  id: 'reply-a-message',\n  children: []\n}];\n\nconst layoutProps = {\n  toc\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <h2 {...{\n      \"id\": \"message-object\"\n    }}>{`Message object`}</h2>\n    <p>{`A message is represented by `}<inlineCode parentName=\"p\">{`ChatMessage`}</inlineCode>{` model.\nDepending on combination of its properties messages appear differently, a screenshot on the left showcases the most common types of messages. A screenshot on the right shows how some of `}<inlineCode parentName=\"p\">{`ChatMessage`}</inlineCode>{` properties are reflected in views:`}</p>\n    <img src=\"../img/messages-showcase.png\" width=\"40%\" />\n    <img src=\"../img/messages-properties.png\" width=\"40%\" />\n    <h2 {...{\n      \"id\": \"optimistic-updates\"\n    }}>{`Optimistic updates`}</h2>\n    <p>{`Optimistic updates model is applied to messages, meaning that when there is a change to local messages state it is propagated to chat components so it is displayed for users right away and then it's synchronized with backend. In case of synchronization failure users may be prompted to retry the failed action.`}</p>\n    <img src=\"../img/message-failure-resend.png\" width=\"30%\" />\n    <p>{`This makes `}<inlineCode parentName=\"p\">{`LocalMessageState`}</inlineCode>{` one of the most important properties in message's lifecycle, because it's used for keeping messages in sync with backend.`}</p>\n    <h2 {...{\n      \"id\": \"get-a-message-by-its-id\"\n    }}>{`Get a Message by its ID`}</h2>\n    <p>{`You can get a single message by its ID:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-swift\"\n      }}>{`import StreamChat \n\n/// Use the \\`ChatClient\\` to create a\n/// \\`ChatMessageController\\` with the \\`ChannelId\\`. \nlet messageController = chatClient.messageController(\n   cid: ChannelId(type: .messaging, id: \"general\"),\n   messageId: \"message-id\" \n) \n\n/// Get the message \nmessageController.synchronize { error in \n   // handle possible errors / access message \n   print(error ?? messageController.message!) \n} \n`}</code></pre>\n    <h2 {...{\n      \"id\": \"create-a-message\"\n    }}>{`Create a message`}</h2>\n    <p><inlineCode parentName=\"p\">{`ComposerVC`}</inlineCode>{` is a UI component that handles messages creation:`}</p>\n    <img src=\"../img/composer-ui.png\" width=\"50%\" />\n    <p>{`If you are using your own component for a message composer you can use `}<inlineCode parentName=\"p\">{`ChatChannelController`}</inlineCode>{` to create messages:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-swift\"\n      }}>{`let controller = ChatChannelController(\n    channelQuery: ChannelQuery(cid: ChannelId(type: .messaging, id: \"general\")),\n    client: client\n)\ncontroller.createNewMessage(\n    text: \"Hello World!\",\n    pinning: .noExpiration,\n    attachments: [image],\n    quotedMessageId: quotedMessage.id,\n    completion: { result in\n        switch result {\n        case .success(let messageId):\n            print(messageId)\n        case .failure(let error):\n            print(error)\n        }\n    }\n)\n`}</code></pre>\n    <p>{`More info on `}<a parentName=\"p\" {...{\n        \"href\": \"/stream-chat-swift/guides/pinned-messages\"\n      }}>{`Pinning`}</a>{` and `}<a parentName=\"p\" {...{\n        \"href\": \"/stream-chat-swift/guides/working-with-attachments\"\n      }}>{`Attachments`}</a>{` can be found in corresponding guides.`}</p>\n    <p>{`More on `}<a parentName=\"p\" {...{\n        \"href\": \"#replying-a-message\"\n      }}>{`Quoted`}</a>{`  messages could be found in this guide below.`}</p>\n    <h2 {...{\n      \"id\": \"how-sending-a-message-works\"\n    }}>{`How sending a message works`}</h2>\n    <p>{`When `}<inlineCode parentName=\"p\">{`createNewMessage`}</inlineCode>{` is called, `}<inlineCode parentName=\"p\">{`ChatChannelController`}</inlineCode>{` creates a new message locally and schedules it for send.`}</p>\n    <p>{`Uploading is handled by an internal entity called `}<inlineCode parentName=\"p\">{`MessageSender`}</inlineCode>{`. It automatically starts\nuploading when it detects locally cached messages with `}<inlineCode parentName=\"p\">{`.pendingSend`}</inlineCode>{` state. `}</p>\n    <p>{`There is no need to take care of `}<inlineCode parentName=\"p\">{`MessageSender`}</inlineCode>{`, it is created and added to the list of background workers by `}<inlineCode parentName=\"p\">{`ChatClient`}</inlineCode>{`.`}</p>\n    <p>{`Sending of the message has the following phases:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`When a message with `}<inlineCode parentName=\"li\">{`.pendingSend`}</inlineCode>{` state local state appears in the db, the sender queues it in the sending queue for the channel the message belongs to.`}</li>\n      <li parentName=\"ol\">{`The pending messages are send one by one order by their `}<inlineCode parentName=\"li\">{`locallyCreatedAt`}</inlineCode>{` value ascending.`}</li>\n      <li parentName=\"ol\">{`When the message is being sent, its local state is changed to `}<inlineCode parentName=\"li\">{`.sending`}</inlineCode></li>\n      <li parentName=\"ol\">{`If the operation is successful, the local state of the message is changed to `}<inlineCode parentName=\"li\">{`nil`}</inlineCode>{`. If the operation fails, the local state of is changed to `}<inlineCode parentName=\"li\">{`sendingFailed`}</inlineCode>{`.`}</li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{}}>{`                                    ┌──▶  \\`nil\\` if success \n  \\`pendingSend\\` ──────▶ \\`sending\\` ──┤                      \n                                    └─▶   \\`sendingFailed\\`                                                         \n`}</code></pre>\n    <p>{`This behavior makes it possible to update your UI with the new message immediately without blocking the UI:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-swift\"\n      }}>{`class MyChannelViewController: UIViewController {\n    let controller = ChannelController(cid: <#ChannelId#>)\n\n    func sendMessage(text: String) {\n        // This method creates a new message locally,\n        // initially with \\`localState == .pendingSend\\`\n        controller.createNewMessage(text: text)\n    }\n\n    // Example handling for Message local state:\n    func tableView(\n        _ tableView: UITableView,\n         cellForRowAt indexPath: IndexPath\n    ) -> UITableViewCell { \n        ...\n        let message = controller.messages[indexPath.row]\n        if message.localState == .pendingSend {\n            // show message as pending send\n\n        } else if message.localState == .sendingFailed {\n            // show retry button for the message\n        }\n        ...\n    }\n}\n`}</code></pre>\n    <div {...{\n      \"className\": \"admonition admonition-info alert alert--info\"\n    }}><div parentName=\"div\" {...{\n        \"className\": \"admonition-heading\"\n      }}><h5 parentName=\"div\"><span parentName=\"h5\" {...{\n            \"className\": \"admonition-icon\"\n          }}><svg parentName=\"span\" {...{\n              \"xmlns\": \"http://www.w3.org/2000/svg\",\n              \"width\": \"14\",\n              \"height\": \"16\",\n              \"viewBox\": \"0 0 14 16\"\n            }}><path parentName=\"svg\" {...{\n                \"fillRule\": \"evenodd\",\n                \"d\": \"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"\n              }}></path></svg></span>{`info`}</h5></div><div parentName=\"div\" {...{\n        \"className\": \"admonition-content\"\n      }}><p parentName=\"div\">{`When a message is created `}<inlineCode parentName=\"p\">{`ChannelController`}</inlineCode>{` sends `}<em parentName=\"p\">{`stop typing event`}</em>{` for this channel`}</p></div></div>\n    <h2 {...{\n      \"id\": \"edit-a-message\"\n    }}>{`Edit a message`}</h2>\n    <p>{`There is an action for editing messages:`}</p>\n    <img src=\"../img/messages-actions.png\" width=\"25%\" />\n    <p>{`When a user is editing a message `}<inlineCode parentName=\"p\">{`ComposerVC`}</inlineCode>{` takes the following appearance:`}</p>\n    <img src=\"../img/composer-edit.png\" width=\"50%\" />\n    <p>{`If you use your own implementation for composer view, the same could be done with `}<inlineCode parentName=\"p\">{`ChatMessageController`}</inlineCode>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-swift\"\n      }}>{`let messageController = chatClient.messageController(\n    cid: channelId,\n    messageId: messageId\n) \nmessageController.editMessage(text: \"World Hello!\") { error in\n    if let error = error {\n        print(error)\n    }\n}\n`}</code></pre>\n    <p>{`Editing a message has several phases:`}</p>\n    <p><strong parentName=\"p\"><inlineCode parentName=\"strong\">{`MessageModel.localState`}</inlineCode>{` states when editing a message:`}</strong></p>\n    <pre><code parentName=\"pre\" {...{}}>{`                                    ┌──▶  \\`nil\\` if success \n  \\`pendingSync\\` ──────▶ \\`syncing\\` ──┤                      \n                                    └─▶   \\`syncingFailed\\`                                                         \n`}</code></pre>\n    <p>{`This behavior makes it possible to update your UI with the updated message immediately without blocking the UI:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-swift\"\n      }}>{`class MyChannelViewController: UIViewController {\n    let controller = ChannelController(cid: <#ChannelId#>)\n\n    func editMessage(message: ChatMessage, text: String) {\n        let messageController = controller.client.messageController(\n            cid: <#ChannelId#>,\n            messageId: message.id\n        )\n\n        // This method updates a message locally\n        // with the \\`localState == .pendingSync\\`\n        messageController.editMessage(text: text)\n    }\n\n    // Example handling for Message local state:\n    func tableView(\n        _ tableView: UITableView,\n        cellForRowAt indexPath: IndexPath\n    ) -> UITableViewCell { \n        ...\n        let message = controller.messages[indexPath.row]\n        if message.localState == .pendingSync {\n            // show message as not being synced with the servers\n\n        } else if message.localState == .syncingFailed {\n            // show retry button\n        }\n        ...\n    }\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"delete-a-message\"\n    }}>{`Delete a message`}</h2>\n    <p>{`A message can be deleted with the corresponding action:`}</p>\n    <img src=\"../img/messages-actions.png\" width=\"25%\" />\n    <p>{`When a user deletes a message it will be hidden for all the rest users in conversation, but it will appear for the user who deleted it like this:`}</p>\n  <img src=\"../img/message-delete.png\" width=\"50%\" />\n    <p>{`In an upcoming version it will become customizable, so it will be possible to hide deleted messages for all participants in a conversation.`}</p>\n    <p>{`Message deletion is handled by `}<inlineCode parentName=\"p\">{`ChatMessageController`}</inlineCode>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-swift\"\n      }}>{`let messageController = chatClient.messageController(\n    cid: channelId,\n    messageId: messageId\n) \nmessageController.deleteMessage { error in\n    if let error = error {\n        print(error)\n    }\n}\n`}</code></pre>\n    <p>{`If the message has `}<inlineCode parentName=\"p\">{`.pendingSend`}</inlineCode>{` or `}<inlineCode parentName=\"p\">{`.sendingFailed`}</inlineCode>{` state it will be removed locally as it hasn't been sent yet.`}</p>\n    <p>{`If the message has some other local state it should be removed on the backend.\nBefore the `}<inlineCode parentName=\"p\">{`delete`}</inlineCode>{` network call happens the local state is set to `}<inlineCode parentName=\"p\">{`deleting`}</inlineCode>{` and based on\nthe response it becomes either `}<inlineCode parentName=\"p\">{`nil`}</inlineCode>{` if request succeeds or `}<inlineCode parentName=\"p\">{`deletingFailed`}</inlineCode>{` if request fails.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`                ┌──▶  \\`nil\\` if success \n   \\`deleting\\` ──┤                      \n                └─▶  \\`deletingFailed\\`                                \n`}</code></pre>\n    <p>{`This behavior makes it possible to update your UI with the updated message immediately without blocking the UI:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-swift\"\n      }}>{`class MyChannelViewController: UIViewController {\n    let controller = ChannelController(cid: <#ChannelId#>)\n\n    func deleteMessage(message: Message) {\n        // Create a \\`MessageController\\` for the message you want to delete\n        let messageController = controller.client.messageController(\n            cid: channelController.channelQuery.cid,\n            messageId: message.id\n        )\n\n        // Delete the message\n        messageController.deleteMessage()\n    }\n\n    // Example handling for Message local state:\n    func tableView(\n        _ tableView: UITableView,\n        cellForRowAt indexPath: IndexPath\n    ) -> UITableViewCell { \n        ...\n        let message = controller.messages[indexPath.row]\n        if message.localState == .deleting {\n            // show message as being deleted\n\n        } else if message.localState == .deletingFailed {\n            // show retry button for deleting the message\n        }\n        ...\n    }\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"reply-a-message\"\n    }}>{`Reply a message`}</h2>\n    <p>{`There are two ways of replying a message:`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><strong parentName=\"p\">{`Quoted reply`}</strong>{`.`}</p>\n        <p parentName=\"li\">{`In case if `}<inlineCode parentName=\"p\">{`ComposerVC`}</inlineCode>{` is used it looks like this during composing, and the resulting message will show both quoted message and the reply itself.`}</p>\n        <img src=\"../img/composer-quoted.png\" width=\"50%\" />\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><strong parentName=\"p\">{`Thread reply`}</strong></p>\n        <p parentName=\"li\">{`  Initiating a thread reply takes a user into thread details screen and the resulting message will look like a normal message that is placed inside the thread. It is also possible to duplicate it to the parent channel.`}</p>\n  <img src=\"../img/thread-details.png\" width=\"35%\" />\n        <p parentName=\"li\">{`  A message with thread replies appears like this:`}</p>\n  <img src=\"../img/thread-reply.png\" width=\"35%\" />\n      </li>\n    </ul>\n    <p>{`If you use your own implementation for message composer you can create a `}<strong parentName=\"p\">{`thread reply`}</strong>{` for a message with `}<inlineCode parentName=\"p\">{`MessageController`}</inlineCode>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-swift\"\n      }}>{`let messageController = chatClient.messageController(\n    cid: channelId,\n    messageId: \"message-id\"\n)\nmessageController.createNewReply(\n    text: \"Thread reply\",\n    pinning: nil,\n    attachments: [],\n    showReplyInChannel: true,\n    quotedMessageId: nil\n)\n`}</code></pre>\n    <p>{`A `}<strong parentName=\"p\">{`quoted reply`}</strong>{` can be created like this:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-swift\"\n      }}>{`let controller = ChatChannelController(\n    channelQuery: ChannelQuery(cid: ChannelId(type: .messaging, id: \"general\")),\n    client: client\n)\nchannelController.createNewMessage(\n    text: \"Quoted reply\",\n    pinning: nil,\n    attachments: [],\n    quotedMessageId: \"quoted-message-id\"\n)\n`}</code></pre>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\n  "]}]}